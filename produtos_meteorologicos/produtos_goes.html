<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Mapa GOES-16/19 - NASA GIBS com Leaflet</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
  #map { height: 600px; width: 100%; }
  .controls {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 1000;
    background: white;
    padding: 10px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  }
  .controls label {
    display: block;
    margin-bottom: 5px;
  }
  .controls select {
    width: 200px;
    padding: 5px;
  }
</style>
</head>
<body>

<div class="controls">
  <label for="layerSelect">Selecionar Camada GOES:</label>
  <select id="layerSelect">
    <option value="goes-east-c13">GOES-East ABI Banda 13 (Infrared)</option>
    <option value="goes-east-c02">GOES-East ABI Banda 2 (Red Visible)</option>
    <option value="goes-east-c01">GOES-East ABI Banda 1 (Blue Visible)</option>
    <option value="modis-terra">MODIS Terra (Comparação)</option>
  </select>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  // Criar mapa centrado na América do Sul
  var map = L.map('map').setView([-15, -60], 4);

  // Camada base OpenStreetMap
  var baseLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
  }).addTo(map);

  // Variável para armazenar a camada atual do GOES
  var currentGoesLayer = null;

  // Definir as diferentes camadas disponíveis
  var layers = {
    'goes-east-c13': {
      url: 'https://gibs.earthdata.nasa.gov/wmts/epsg3857/best/GOES-East_ABI_L2_CMI_C13/default/latest/GoogleMapsCompatible_Level9/{z}/{y}/{x}.png',
      attribution: 'NASA GIBS - GOES-East ABI Banda 13 (Infrared)',
      maxZoom: 9
    },
    'goes-east-c02': {
      url: 'https://gibs.earthdata.nasa.gov/wmts/epsg3857/best/GOES-East_ABI_L2_CMI_C02/default/latest/GoogleMapsCompatible_Level9/{z}/{y}/{x}.png',
      attribution: 'NASA GIBS - GOES-East ABI Banda 2 (Red Visible)',
      maxZoom: 9
    },
    'goes-east-c01': {
      url: 'https://gibs.earthdata.nasa.gov/wmts/epsg3857/best/GOES-East_ABI_L2_CMI_C01/default/latest/GoogleMapsCompatible_Level9/{z}/{y}/{x}.png',
      attribution: 'NASA GIBS - GOES-East ABI Banda 1 (Blue Visible)',
      maxZoom: 9
    },
    'modis-terra': {
      url: 'https://gibs.earthdata.nasa.gov/wmts/epsg3857/best/MODIS_Terra_CorrectedReflectance_TrueColor/default/latest/GoogleMapsCompatible_Level9/{z}/{y}/{x}.jpg',
      attribution: 'NASA GIBS - MODIS Terra True Color',
      maxZoom: 9
    }
  };

  // Função para trocar a camada
  function changeLayer(layerKey) {
    // Remover a camada atual se existir
    if (currentGoesLayer) {
      map.removeLayer(currentGoesLayer);
    }

    // Adicionar a nova camada
    var layerConfig = layers[layerKey];
    currentGoesLayer = L.tileLayer(layerConfig.url, {
      attribution: layerConfig.attribution,
      maxZoom: layerConfig.maxZoom,
      opacity: 0.7
    }).addTo(map);
  }

  // Adicionar a camada inicial (GOES-East Banda 13)
  changeLayer('goes-east-c13');

  // Event listener para o seletor de camadas
  document.getElementById('layerSelect').addEventListener('change', function(e) {
    changeLayer(e.target.value);
  });

  // Adicionar controle de camadas do Leaflet
  var overlayMaps = {
    "Camada Base": baseLayer
  };

  L.control.layers(null, overlayMaps).addTo(map);

</script>

</body>
</html>
